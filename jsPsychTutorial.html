<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="https://unpkg.com/jspsych@8.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@2.0.0"></script>
    <script src="https://unpkg.com/@jspsych-contrib/plugin-pipe"></script>
    <link href="https://unpkg.com/jspsych@8.0.0/css/jspsych.css" rel="stylesheet" type="text/css" />
  </head>
  <body></body>
  <script>
  	/* initialize jsPsych */
  	var jsPsych = initJsPsych();

  	var timeline = [];
  	var instructions = {
  		type: jsPsychHtmlKeyboardResponse,
  		stimulus: "In this task, you'll do stuff!"
  	};
  	timeline.push(instructions);

  	var image_trial = {
  		type: jsPsychImageKeyboardResponse,
  		stimulus: "image/gulu1.png",
  		choices: ['g', 'h'],
  		prompt: "\nPress g if you see a green alien."
  	};
  	
    // timeline.push(image_trial);


    
    var fixation = {
      type: jsPsychHtmlKeyboardResponse,
      stimulus: "+",
      choices: "NO_KEYS",
      trial_duration: 500

    };

    var image_trial_timeVar = {
      type: jsPsychImageKeyboardResponse,
      stimulus: jsPsych.timelineVariable('image'),
      choices: ['g', 'r'],
      prompt: "\nPress g if you see a green alien, r if you see a red alien."
    };

    var trial_procedure = {
      timeline: [fixation, image_trial_timeVar],
      timeline_variables:[
          {image:"image/gulu1.png", name: "gulu"},
          {image:"image/norl1.png", name: "norl"}

      ]
    };

    timeline.push(trial_procedure);


    const subject_id = jsPsych.randomization.randomID(10);
    const filename = `${subject_id}.csv`;

    const save_data = {
          type: jsPsychPipe,
          action: "save",
          experiment_id: "s0JG4pNcCMaK",
          filename: filename,
          data_string: ()=>jsPsych.data.get().csv()
              };
    timeline.push(save_data);

  	jsPsych.run(timeline);


  </script>
</html>